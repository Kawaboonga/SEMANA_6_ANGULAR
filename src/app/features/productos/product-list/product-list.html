<!-- ============================================================================
     TEMPLATE: PRODUCT LIST PAGE
     Vista principal del catálogo de productos.
     - Muestra título + subtítulo
     - Banner de categorías principales (Guitarras / Bajos / Pedales / Amps)
     - Filtros secundarios (orden, condición, etc.)
     - Grid de productos filtrados
     ----------------------------------------------------------------------------
     Este template trabaja SOLO con @Inputs/@Outputs del smart component.
     Toda la lógica vive en product-list.ts.
============================================================================ -->

<section class="py-4">

  <!-- ============================================================
       ENCABEZADO PRINCIPAL
       Título + subtítulo del catálogo + botón admin "Nuevo"
  ============================================================ -->
  <div class="d-flex justify-content-between align-items-center mb-5">
    <div>
      <h2 class="mb-1 display-6">Catálogo de productos</h2>
      <p class="text-secondary mb-0">
        Guitarras, bajos, pedales, amplificadores y más.
      </p>
    </div>

    <!-- BOTÓN "NUEVO PRODUCTO" (solo admin) -->
    <button
      *ngIf="isAdmin()"
      type="button"
      class="btn btn-primary"
      (click)="onAdminCreate()"
    >
      <i class="bi bi-plus-lg me-1"></i>
      Nuevo producto
    </button>
  </div>

  

  <!-- Wrapper con fade-up general -->
  <div appFadeUp>

    <!-- ============================================================
         FORMULARIO INLINE (solo cuando showForm = true)
         Reutiliza el mismo ProductFormComponent (dashboard-style)
    ============================================================ -->

    <div *ngIf="showForm()" class="mb-4" appFadeUp>
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <app-product-form
            [product]="selectedProduct()"
            (save)="onAdminSave($event)"
            (cancel)="onAdminCancel()"
          ></app-product-form>
        </div>
      </div>
    </div>

    <!-- ============================================================
         BANNER DE CATEGORÍAS PRINCIPALES
    ============================================================ -->
    <div>
      <app-product-category-banner
        [activeCategory]="bannerCategory()"
        (categoryChange)="onBannerCategoryChange($event)">
      </app-product-category-banner>
    </div>

    <!-- ============================================================
         FILTROS SECUNDARIOS
    ============================================================ -->
    

    <div class="mb-4">
      <app-product-filters
        [filter]="filter()"
        (filterChange)="onFilterChange($event)"
        (clearAll)="onClearAll()">
      </app-product-filters>
    </div>

    <!-- ============================================================
         GRID DE PRODUCTOS
         - Admin ve botones editar/eliminar en cards
         - Acciones conectadas a CRUD real (localStorage)
    ============================================================ -->
     <div appFadeUp>
      <app-product-grid
        [products]="products()"
        [canEdit]="isAdmin()"
        (editRequest)="onAdminEdit($event)"
        (deleteRequest)="onAdminDelete($event)">
      </app-product-grid>
    </div>


  </div> <!-- /fade wrapper -->

</section>


