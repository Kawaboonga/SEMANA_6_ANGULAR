<section class="py-4">

  <!-- ============================================================
       ENCABEZADO DE LA PÁGINA
       ------------------------------------------------------------
       Título + subtítulo. No tiene lógica, solo texto estático.
  ============================================================ -->
  <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
    <div>
      <h2 class="text-light display-6">Instructores disponibles</h2>
      <p class="text-secondary pb-4">
        Encuentra un tutor que mejor se adapte a tu nivel y modalidad.
      </p>
    </div>

    <!-- BOTÓN "NUEVO TUTOR" (solo admin) -->
    <button
      *ngIf="isAdmin()"
      type="button"
      class="btn btn-primary"
      (click)="onAdminCreate()"
    >
      <i class="bi bi-plus-lg me-1"></i>
      Nuevo tutor
    </button>
  </div>


  <!-- ============================================================
       CONTENEDOR PRINCIPAL (animación fade)
       ------------------------------------------------------------
       Todo el bloque interno hace fade-up cuando aparece.
  ============================================================ -->
  <div appFadeUp>

    <!-- ============================================================
         FORMULARIO INLINE (solo cuando showForm = true)
         Reutiliza el mismo TutorFormComponent (dashboard-style)
    ============================================================ -->
    <div *ngIf="showForm()" class="mb-4" appFadeUp>
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <app-tutor-form
            [value]="selectedTutor()"
            (save)="onAdminSave($event)"
            (cancel)="onAdminCancel()"
          ></app-tutor-form>
        </div>
      </div>
    </div>

    <!-- ============================================================
         BARRA DE FILTROS (DUMB COMPONENT)
         ------------------------------------------------------------
         - Recibe los valores del filtro actual mediante @Input
         - Emite eventos:
             • filterChange → cuando cambia un campo
             • reset        → cuando se presionan “limpiar filtros”
    ============================================================ -->
    <app-tutor-filter-bar
      [filter]="filter()"
      (filterChange)="onFilterChange($event)"
      (reset)="onResetFilter()"
      class="mb-4"
    ></app-tutor-filter-bar>


    <!-- ============================================================
         LISTADO DE TUTORES FILTRADOS
         ------------------------------------------------------------
         - tutors() es un computed() → se recalcula automático
         - Se usa grid de Bootstrap
         - Cada tutor usa app-tutor-card (dumb component)
    ============================================================ -->
    <div class="row g-4 pt-3" appFadeUp>

      <!-- Tarjeta individual -->
      <div
        class="col-12 col-md-6 col-lg-3"
        *ngFor="let tutor of tutors()"
      >
        <app-tutor-card
          [tutor]="tutor"
          variant="grid"
          [descriptionMaxLength]="140"

          [canEdit]="isAdmin()"
          (editRequest)="onAdminEdit($event)"
          (deleteRequest)="onAdminDelete($event)"
        ></app-tutor-card>
      </div>
      <!--- Datos del tutor -->
      <!-- Versión compacta de la card -->
      <!-- Recorte de texto -->


      <!-- ======================================================
           ESTADO VACÍO (cuando no hay coincidencias)
           ------------------------------------------------------
           tutors().length === 0 → no se encontró ningún tutor.
      ======================================================= -->
      <div class="col-12" *ngIf="tutors().length === 0">
        <div class="alert alert-dark text-center mt-4">
          No se encontraron tutores con estos filtros.
        </div>
      </div>

    </div> <!-- /row -->
  </div> <!-- /fade-up -->
</section>
