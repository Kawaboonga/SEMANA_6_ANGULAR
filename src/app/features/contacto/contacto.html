
<!--
  Layout general:
  - Contenedor centrado con padding vertical.
  - appFadeUp aplica la animación al entrar en viewport.
-->
<div class="container py-4" appFadeUp>
  <div class="row justify-content-center">
    <div class="col-lg-9 col-md-10">
      <!-- Card principal que envuelve imagen + formulario -->
      <div class="card shadow-sm border-0 overflow-hidden rounded-4">
        <div class="row g-0">

          <!-- ======================================================
               COLUMNA IZQUIERDA: IMAGEN 
               Solo visible en pantallas md en adelante.
          ======================================================= -->
          <div class="col-md-5 d-none d-md-block position-relative">
            <div class="h-100 w-100">
              <img
                src="assets/img/general/g5.png"
                alt="Contacto SoundSeeker"
                class="img-fluid h-100 w-100 object-fit-cover"
              />
            </div>

            <!-- Capa oscurecida con gradiente para mejorar la lectura del texto -->
            <div
              class="position-absolute top-0 start-0 w-100 h-100"
              style="
                background: linear-gradient(
                  135deg,
                  rgba(15, 23, 42, 0.85),
                  rgba(15, 23, 42, 0.3)
                );
              "
            ></div>

            <!-- Texto de branding sobre la imagen -->
            <div class="position-absolute bottom-0 start-0 p-4 text-white">
              <div class="small text-uppercase mb-1 opacity-75">
                SoundSeeker
              </div>
              <h2 class="h5 mb-1">Hablemos de tu sonido</h2>
              <p class="small mb-0 opacity-85">
                Clases, servicios y equipos pensados para músicos reales.
              </p>
            </div>
          </div>

          <!-- ======================================================
               COLUMNA DERECHA: FORMULARIO DE CONTACTO
          ======================================================= -->
          <div class="col-md-7">
            <div class="card-body p-4 p-md-5">

              <!-- Encabezado del formulario -->
              <h1 class="h4 mb-2 text-center text-md-start">
                Contacto
              </h1>
              <p class="text-muted small text-center text-md-start mb-4">
                ¿Tienes dudas sobre clases, servicios o equipos? Escríbenos y te respondemos pronto.
              </p>

              <!-- Mensaje de éxito tras envío correcto (controlado por submitted en el TS) -->
              <div
                *ngIf="submitted"
                class="alert alert-success py-2 small mb-4"
                role="alert"
              >
                ¡Gracias por tu mensaje! Te contactaremos a la brevedad.
              </div>

              <!--
                Formulario reactivo:
                - Vinculado al FormGroup "form" de Contacto.
                - onSubmit() gestiona validaciones y simulación de envío.
              -->
              <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

                <!-- ============================
                     CAMPO: NOMBRE
                ============================= -->
                <div class="mb-3">
                  <label class="form-label">Nombre</label>
                  <input
                    type="text"
                    class="form-control"
                    formControlName="name"
                    [class.is-invalid]="
                      hasError('name', 'required') ||
                      hasError('name', 'minlength')
                    "
                    placeholder="Tu nombre"
                  />
                  <div class="invalid-feedback" *ngIf="hasError('name', 'required')">
                    El nombre es obligatorio.
                  </div>
                  <div class="invalid-feedback" *ngIf="hasError('name', 'minlength')">
                    El nombre debe tener al menos 3 caracteres.
                  </div>
                </div>

                <!-- ============================
                     CAMPO: CORREO ELECTRÓNICO
                ============================= -->
                <div class="mb-3">
                  <label class="form-label">Correo electrónico</label>
                  <input
                    type="email"
                    class="form-control"
                    formControlName="email"
                    [class.is-invalid]="
                      hasError('email', 'required') ||
                      hasError('email', 'email')
                    "
                    placeholder="tucorreo@ejemplo.com"
                  />
                  <div class="invalid-feedback" *ngIf="hasError('email', 'required')">
                    El correo es obligatorio.
                  </div>
                  <div class="invalid-feedback" *ngIf="hasError('email', 'email')">
                    Ingresa un correo electrónico válido.
                  </div>
                </div>

                <!-- ============================
                     CAMPO: ASUNTO
                ============================= -->
                <div class="mb-3">
                  <label class="form-label">Asunto</label>
                  <input
                    type="text"
                    class="form-control"
                    formControlName="subject"
                    [class.is-invalid]="
                      hasError('subject', 'required') ||
                      hasError('subject', 'minlength')
                    "
                    placeholder="Por ejemplo: Consulta por clases de guitarra"
                  />
                  <div class="invalid-feedback" *ngIf="hasError('subject', 'required')">
                    El asunto es obligatorio.
                  </div>
                  <div class="invalid-feedback" *ngIf="hasError('subject', 'minlength')">
                    El asunto debe tener al menos 5 caracteres.
                  </div>
                </div>

                <!-- ============================
                     CAMPO: MENSAJE
                ============================= -->
                <div class="mb-3">
                  <label class="form-label">Mensaje</label>
                  <textarea
                    rows="4"
                    class="form-control"
                    formControlName="message"
                    [class.is-invalid]="
                      hasError('message', 'required') ||
                      hasError('message', 'minlength')
                    "
                    placeholder="Cuéntanos qué necesitas: tipo de clases, instrumento, nivel, horarios, etc."
                  ></textarea>
                  <div class="invalid-feedback" *ngIf="hasError('message', 'required')">
                    El mensaje es obligatorio.
                  </div>
                  <div class="invalid-feedback" *ngIf="hasError('message', 'minlength')">
                    El mensaje debe tener al menos 10 caracteres.
                  </div>
                </div>

                <!-- ======================================================
                     PIE DEL FORMULARIO: BOTONES + INFO DE CONTACTO
                ======================================================= -->
                <div class="d-flex flex-column gap-3 mt-3">
                  <!-- Botones de acción (enviar / limpiar) -->
                  <div class="d-flex flex-column flex-md-row gap-2">
                    <!-- Botón enviar, deshabilitado mientras sending = true -->
                    <button
                      type="submit"
                      class="btn btn-primary px-4 flex-grow-1"
                      [disabled]="sending"
                    >
                      <span *ngIf="!sending">
                        <i class="bi bi-send me-1"></i>
                        Enviar mensaje
                      </span>
                      <span *ngIf="sending">
                        Enviando...
                      </span>
                    </button>

                    <!-- Botón limpiar → llama a onClear() en el componente -->
                    <button
                      type="button"
                      class="btn btn-outline-secondary px-4"
                      (click)="onClear()"
                    >
                      <i class="bi bi-eraser me-1"></i>
                      Limpiar
                    </button>
                  </div>

                  <!-- Información alternativa de contacto -->
                  <div class="text-muted small text-md-end">
                    También puedes escribirnos a<br />
                    <span class="fw-semibold">contacto@soundseeker.cl</span>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <!-- /col-md-7 -->
        </div>
      </div>

      <!-- Nota informativa bajo la card -->
      <div class="text-center text-muted small mt-3">
        <i class="bi bi-info-circle me-1"></i>
        Respondemos la mayoría de los mensajes dentro de las próximas 24 horas hábiles.
      </div>
    </div>
  </div>
</div>
